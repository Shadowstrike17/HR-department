<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Workforce Planning | IGCSE Business Studies</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            overflow-x: hidden;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 10;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* 3D Canvas */
        #office-canvas {
            width: 100%;
            height: 250px;
            margin: 0 auto;
            position: relative;
        }
        
        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .intro-text {
            text-align: center;
            margin-bottom: 2rem;
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        /* Game Container */
        .game-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .game-section {
            margin-bottom: 2rem;
        }
        
        h2 {
            color: #c0392b;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }
        
        h3 {
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 1.4rem;
        }
        
        /* Case Study Section */
        .case-study {
            background: #f9f9f9;
            border-left: 5px solid #e74c3c;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 0 10px 10px 0;
        }
        
        .case-study p {
            line-height: 1.7;
            margin-bottom: 1rem;
        }
        
        .highlight {
            font-weight: bold;
            color: #c0392b;
        }
        
        /* Participant Selection */
        .participants {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .player-card {
            flex: 1;
            min-width: 250px;
            background: #f5f7fa;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .player-card.boss {
            border: 2px solid #e74c3c;
        }
        
        .player-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .player-card h4 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .player-card input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .player-card .role {
            font-weight: bold;
            color: #555;
        }
        
        .player-card .salary {
            color: #2980b9;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        /* Candidate Profiles */
        .candidates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .candidate {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            transition: all 0.3s ease;
            border: 1px solid #eee;
            position: relative;
        }
        
        .candidate:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .candidate h4 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .candidate p {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }
        
        .candidate .candidate-salary {
            font-weight: bold;
            color: #2980b9;
        }
        
        .candidate .candidate-skills {
            color: #27ae60;
            font-weight: bold;
        }
        
        .candidate-checkbox {
            position: absolute;
            top: 1rem;
            right: 1rem;
            transform: scale(1.5);
            cursor: pointer;
        }
        
        /* Decision Section */
        .decision-section {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .budget-display {
            font-size: 1.5rem;
            color: #2980b9;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .remaining-budget {
            font-size: 1.5rem;
            color: #27ae60;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .warning {
            color: #e74c3c;
            font-weight: bold;
        }
        
        /* Buttons */
        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            margin-right: 1rem;
            margin-bottom: 1rem;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            background: #c0392b;
        }
        
        .btn.secondary {
            background: #3498db;
        }
        
        .btn.secondary:hover {
            background: #2980b9;
        }
        
        .btn.success {
            background: #2ecc71;
        }
        
        .btn.success:hover {
            background: #27ae60;
        }
        
        .btn.disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }
        
        .btn.disabled:hover {
            transform: none;
            box-shadow: none;
            background: #7f8c8d;
        }
        
        /* Results Section */
        .results {
            display: none;
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .results h3 {
            margin-bottom: 1rem;
            color: #2980b9;
        }
        
        .results.success {
            border-left: 5px solid #2ecc71;
        }
        
        .results.failure {
            border-left: 5px solid #e74c3c;
        }
        
        .correct-answer {
            display: none;
            background: #f0fff4;
            border-left: 5px solid #2ecc71;
            padding: 1.5rem;
            margin-top: 1rem;
            border-radius: 0 10px 10px 0;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease forwards;
        }
        
        /* Footer */
        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        /* Navigation Button */
        .nav-button {
            display: block;
            width: fit-content;
            padding: 0.8rem 1.5rem;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 30px;
            margin: 2rem auto;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            background: #2980b9;
        }
        
        /* Improved Loading Indicator */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .loading-text {
            margin-top: 20px;
            font-size: 1.5rem;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .spinner {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            border-radius: 50%;
            border: 4px solid transparent;
            border-top-color: white;
            border-bottom-color: white;
            animation: spin 1.5s linear infinite;
        }

        .spinner:before, .spinner:after {
            content: '';
            position: absolute;
            border-radius: 50%;
            border: 4px solid transparent;
        }

        .spinner:before {
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-top-color: #f1c40f;
            border-bottom-color: #f1c40f;
            animation: spin 2s linear infinite;
        }

        .spinner:after {
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border-top-color: #3498db;
            border-bottom-color: #3498db;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {transform: rotate(0deg);}
            100% {transform: rotate(360deg);}
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loading-content">
            <div class="spinner"></div>
            <div class="loading-text">Loading Workforce Planning Game...</div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <h1>Interactive Workforce Planning</h1>
        <p class="subtitle">Make strategic hiring decisions to maximize your HR budget!</p>
    </header>
    
    <!-- 3D Office Visualization -->
    <div id="office-canvas"></div>
    
    <!-- Main Content -->
    <div class="main-content">
        <p class="intro-text">
            Welcome to the HR Department's Interactive Workforce Planning Challenge! As the HR Manager,
            you'll need to make strategic hiring decisions to meet the company's needs while staying within budget.
            Choose your participants and see who can build the most effective team!
        </p>
        
        <div class="game-container">
            <!-- Setup Section -->
            <div class="game-section" id="setup-section">
                <h2>Step 1: Choose Your Participants</h2>
                <p>Enter the names of students who will participate in this workforce planning exercise:</p>
                
                <div class="participants">
                    <div class="player-card boss">
                        <h4>HR Manager (Boss)</h4>
                        <input type="text" id="boss-name" placeholder="Enter HR Manager's name">
                        <p class="role">Role: Makes final hiring decisions</p>
                        <p>Budget: <span class="salary">£100,000</span></p>
                    </div>
                    
                    <div class="player-card">
                        <h4>Candidate 1</h4>
                        <input type="text" id="candidate1-name" placeholder="Enter Candidate 1's name">
                    </div>
                    
                    <div class="player-card">
                        <h4>Candidate 2</h4>
                        <input type="text" id="candidate2-name" placeholder="Enter Candidate 2's name">
                    </div>
                    
                    <div class="player-card">
                        <h4>Candidate 3</h4>
                        <input type="text" id="candidate3-name" placeholder="Enter Candidate 3's name">
                    </div>
                    
                    <div class="player-card">
                        <h4>Candidate 4</h4>
                        <input type="text" id="candidate4-name" placeholder="Enter Candidate 4's name">
                    </div>
                </div>
                
                <button class="btn" id="start-game">Start Game</button>
            </div>
            
            <!-- Case Study Section -->
            <div class="game-section" id="case-study-section" style="display:none;">
                <h2>Step 2: The HR Challenge</h2>
                
                <div class="case-study">
                    <h3>Case Study: JakAC Expansion</h3>
                    <p>
                        <span class="highlight" id="boss-name-display">The HR Manager</span> is the HR Director at JakAC, 
                        a growing air conditioning manufacturer based in Jakarta. The company is expanding its operations 
                        and needs to hire new staff for the production department.
                    </p>
                    <p>
                        Due to recent budget constraints, <span class="highlight" id="boss-name-display2">the HR Manager</span> 
                        has been allocated <span class="highlight">£100,000</span> to hire new employees for the production department.
                        The company needs to fill critical positions immediately to meet increasing customer demand.
                    </p>
                    <p>
                        <span class="highlight" id="boss-name-display3">The HR Manager</span> must select the most appropriate 
                        candidates while staying within budget. The decision must balance the need for specialized skills 
                        with cost considerations.
                    </p>
                    <p><strong>The Challenge:</strong> Select the best combination of candidates to hire within the budget constraint 
                    of £100,000 to meet the company's production needs most effectively.</p>
                </div>
                
                <h3>Available Candidates</h3>
                <p>Review the following candidate profiles and select which ones to hire:</p>
                
                <div class="candidates">
                    <div class="candidate">
                        <input type="checkbox" class="candidate-checkbox" id="candidate1-checkbox" data-salary="45000">
                        <h4 id="candidate1-name-display">Candidate 1</h4>
                        <p><strong>Position:</strong> Production Supervisor</p>
                        <p><strong>Experience:</strong> 8 years in manufacturing</p>
                        <p><strong>Skills:</strong> <span class="candidate-skills">Team management, Quality control, Lean manufacturing</span></p>
                        <p><strong>Salary Requirement:</strong> <span class="candidate-salary">£45,000</span></p>
                    </div>
                    
                    <div class="candidate">
                        <input type="checkbox" class="candidate-checkbox" id="candidate2-checkbox" data-salary="38000">
                        <h4 id="candidate2-name-display">Candidate 2</h4>
                        <p><strong>Position:</strong> Maintenance Technician</p>
                        <p><strong>Experience:</strong> 5 years in industrial maintenance</p>
                        <p><strong>Skills:</strong> <span class="candidate-skills">Machinery repair, Preventive maintenance, Troubleshooting</span></p>
                        <p><strong>Salary Requirement:</strong> <span class="candidate-salary">£38,000</span></p>
                    </div>
                    
                    <div class="candidate">
                        <input type="checkbox" class="candidate-checkbox" id="candidate3-checkbox" data-salary="60000">
                        <h4 id="candidate3-name-display">Candidate 3</h4>
                        <p><strong>Position:</strong> Production Engineer</p>
                        <p><strong>Experience:</strong> 10 years in HVAC manufacturing</p>
                        <p><strong>Skills:</strong> <span class="candidate-skills">Process optimization, Product design, Automation</span></p>
                        <p><strong>Salary Requirement:</strong> <span class="candidate-salary">£60,000</span></p>
                    </div>
                    
                    <div class="candidate">
                        <input type="checkbox" class="candidate-checkbox" id="candidate4-checkbox" data-salary="28000">
                        <h4 id="candidate4-name-display">Candidate 4</h4>
                        <p><strong>Position:</strong> Assembly Line Worker</p>
                        <p><strong>Experience:</strong> 3 years in factory assembly</p>
                        <p><strong>Skills:</strong> <span class="candidate-skills">Assembly operations, Quality inspection, Team collaboration</span></p>
                        <p><strong>Salary Requirement:</strong> <span class="candidate-salary">£28,000</span></p>
                    </div>
                    
                    <div class="candidate">
                        <input type="checkbox" class="candidate-checkbox" id="candidate5-checkbox" data-salary="52000">
                        <h4>Sarah Johnson</h4>
                        <p><strong>Position:</strong> Quality Control Manager</p>
                        <p><strong>Experience:</strong> 7 years in quality management</p>
                        <p><strong>Skills:</strong> <span class="candidate-skills">ISO 9001, Statistical analysis, Team leadership</span></p>
                        <p><strong>Salary Requirement:</strong> <span class="candidate-salary">£52,000</span></p>
                    </div>
                    
                    <div class="candidate">
                        <input type="checkbox" class="candidate-checkbox" id="candidate6-checkbox" data-salary="35000">
                        <h4>Michael Chen</h4>
                        <p><strong>Position:</strong> Supply Chain Coordinator</p>
                        <p><strong>Experience:</strong> 4 years in logistics</p>
                        <p><strong>Skills:</strong> <span class="candidate-skills">Inventory management, Procurement, ERP systems</span></p>
                        <p><strong>Salary Requirement:</strong> <span class="candidate-salary">£35,000</span></p>
                    </div>
                </div>
                
                <!-- Decision Section -->
                <div class="decision-section">
                    <h3>Make Your Decision</h3>
                    <p>Select the candidates you want to hire by checking the boxes next to their profiles.</p>
                    <p class="budget-display">Total Budget: £100,000</p>
                    <p class="remaining-budget" id="remaining-budget">Remaining Budget: £100,000</p>
                    <p id="warning-text" class="warning" style="display:none;">Warning: You've exceeded your budget!</p>
                    
                    <button class="btn" id="submit-decision">Submit Decision</button>
                </div>
                
                <!-- Results Section -->
                <div class="results" id="results">
                    <h3 id="result-heading">Your Results</h3>
                    <p id="result-text"></p>
                    <div class="button-group">
                        <button class="btn secondary" id="show-answer">Show Correct Answer</button>
                        <button class="btn" id="retry">Retry</button>
                    </div>
                    
                    <div class="correct-answer" id="correct-answer">
                        <h3>Optimal Hiring Decision</h3>
                        <p>The optimal combination would be:</p>
                        <ul id="correct-candidates">
                            <li>Production Engineer (£60,000) - Essential for designing and optimizing production processes</li>
                            <li>Maintenance Technician (£38,000) - Critical for keeping machinery operational</li>
                        </ul>
                        <p>Total cost: £98,000</p>
                        <p><strong>Justification:</strong> This combination provides the technical expertise needed to optimize production processes (Production Engineer) while ensuring equipment remains operational (Maintenance Technician). The Production Engineer brings valuable experience in HVAC manufacturing specifically, which aligns perfectly with JakAC's products. Together, they form a strong technical foundation that will have the greatest impact on production capacity and efficiency.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <a href="index.html" class="nav-button">Return to Home Page</a>
    </div>
    
    <!-- Footer -->
    <footer>
        <p>© 2025 HR Department Explorer | IGCSE Business Studies</p>
    </footer>
    
    <script>
        // Wait for page to load
        window.addEventListener('load', function() {
            // Hide loading screen after delay
            setTimeout(function() {
                document.getElementById('loading').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loading').style.display = 'none';
                }, 500);
            }, 1500);
            
            // Initialize Three.js scene
            initOfficeScene();
            
            // Setup game functionality
            setupGame();
        });
        
        // Three.js 3D Office Visualization
        function initOfficeScene() {
            // Canvas setup
            const canvas = document.getElementById('office-canvas');
            
            // Scene setup
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf9ebea);
            
            // Camera setup
            const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
            camera.position.z = 5;
            camera.position.y = 1;
            
            // Renderer setup
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            canvas.appendChild(renderer.domElement);
            
            // Responsive canvas
            window.addEventListener('resize', function() {
                const width = canvas.clientWidth;
                const height = canvas.clientHeight;
                renderer.setSize(width, height);
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
            });
            
            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 10, 7);
            scene.add(directionalLight);
            
            // Create office floor
            const floorGeometry = new THREE.PlaneGeometry(20, 20);
            const floorMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xf5f5f5,
                roughness: 0.8
            });
            const floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = -Math.PI / 2;
            floor.position.y = -1;
            scene.add(floor);
            
            // Create meeting table
            const tableGeometry = new THREE.CylinderGeometry(2, 2, 0.1, 32);
            const tableMaterial = new THREE.MeshStandardMaterial({ color: 0x8b4513 });
            const table = new THREE.Mesh(tableGeometry, tableMaterial);
            table.position.set(0, -0.5, 0);
            scene.add(table);
            
            // Create chairs around the table
            function createChair(angle) {
                const chairGroup = new THREE.Group();
                
                // Chair seat
                const seatGeometry = new THREE.CylinderGeometry(0.4, 0.4, 0.1, 16);
                const chairMaterial = new THREE.MeshStandardMaterial({ color: 0xe74c3c });
                const seat = new THREE.Mesh(seatGeometry, chairMaterial);
                seat.position.y = -0.3;
                chairGroup.add(seat);
                
                // Chair back
                const backGeometry = new THREE.BoxGeometry(0.8, 0.8, 0.1);
                const back = new THREE.Mesh(backGeometry, chairMaterial);
                back.position.y = 0.1;
                back.position.z = -0.25;
                chairGroup.add(back);
                
                // Position chair around table
                const radius = 3;
                chairGroup.position.x = radius * Math.cos(angle);
                chairGroup.position.z = radius * Math.sin(angle);
                
                // Rotate chair to face table
                chairGroup.rotation.y = angle + Math.PI;
                
                return chairGroup;
            }
            
            // Add chairs around the table
            for (let i = 0; i < 6; i++) {
                const angle = (i / 6) * Math.PI * 2;
                const chair = createChair(angle);
                scene.add(chair);
            }
            
            // Create people icons (simplified for performance)
            function createPersonIcon(x, z, color) {
                const personGroup = new THREE.Group();
                
                // Head
                const headGeometry = new THREE.SphereGeometry(0.2, 16, 16);
                const personMaterial = new THREE.MeshStandardMaterial({ color: color });
                const head = new THREE.Mesh(headGeometry, personMaterial);
                head.position.y = 0.5;
                personGroup.add(head);
                
                // Body
                const bodyGeometry = new THREE.ConeGeometry(0.3, 0.6, 16);
                const body = new THREE.Mesh(bodyGeometry, personMaterial);
                body.position.y = 0.1;
                personGroup.add(body);
                
                personGroup.position.set(x, 0, z);
                return personGroup;
            }
            
            // Create HR icons floating above the scene
            function createHRIcon(x, y, z) {
                const iconGroup = new THREE.Group();
                
                // Document icon
                const docGeometry = new THREE.BoxGeometry(0.3, 0.4, 0.02);
                const docMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff });
                const doc = new THREE.Mesh(docGeometry, docMaterial);
                iconGroup.add(doc);
                
                // Document lines
                for(let i = 0; i < 3; i++) {
                    const lineGeometry = new THREE.BoxGeometry(0.2, 0.02, 0.03);
                    const lineMaterial = new THREE.MeshStandardMaterial({ color: 0xe74c3c });
                    const line = new THREE.Mesh(lineGeometry, lineMaterial);
                    line.position.y = 0.1 - (i * 0.08);
                    iconGroup.add(line);
                }
                
                iconGroup.position.set(x, y, z);
                
                // Animation data
                iconGroup.userData = {
                    floatY: y,
                    floatSpeed: 0.003 + Math.random() * 0.002,
                    floatHeight: 0.1 + Math.random() * 0.1,
                    rotationSpeed: 0.01
                };
                
                return iconGroup;
            }
            
            // Add people around the table
            const person1 = createPersonIcon(3, 0, 0xe74c3c);
            const person2 = createPersonIcon(1.5, 2.6, 0x3498db);
            const person3 = createPersonIcon(-1.5, 2.6, 0x2ecc71);
            const person4 = createPersonIcon(-3, 0, 0xf1c40f);
            const person5 = createPersonIcon(-1.5, -2.6, 0x9b59b6);
            const person6 = createPersonIcon(1.5, -2.6, 0xe67e22);
            
            scene.add(person1, person2, person3, person4, person5, person6);
            
            // Add floating HR icons
            const hrIcons = [];
            for(let i = 0; i < 8; i++) {
                const x = (Math.random() - 0.5) * 8;
                const y = 1.5 + Math.random() * 2;
                const z = (Math.random() - 0.5) * 8;
                const icon = createHRIcon(x, y, z);
                scene.add(icon);
                hrIcons.push(icon);
            }
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                
                // Animate HR icons
                for(let icon of hrIcons) {
                    // Float up and down
                    const data = icon.userData;
                    icon.position.y = data.floatY + Math.sin(Date.now() * data.floatSpeed) * data.floatHeight;
                    
                    // Rotate slowly
                    icon.rotation.y += data.rotationSpeed;
                }
                
                // Slowly rotate camera around the scene
                camera.position.x = 5 * Math.sin(Date.now() * 0.0005);
                camera.position.z = 5 * Math.cos(Date.now() * 0.0005);
                camera.lookAt(0, 0, 0);
                
                renderer.render(scene, camera);
            }
            
            animate();
        }
        
        // Setup game functionality
        function setupGame() {
            // Get DOM elements
            const startGameBtn = document.getElementById('start-game');
            const setupSection = document.getElementById('setup-section');
            const caseStudySection = document.getElementById('case-study-section');
            const checkboxes = document.querySelectorAll('.candidate-checkbox');
            const remainingBudgetDisplay = document.getElementById('remaining-budget');
            const warningText = document.getElementById('warning-text');
            const submitDecisionBtn = document.getElementById('submit-decision');
            const resultsSection = document.getElementById('results');
            const resultHeading = document.getElementById('result-heading');
            const resultText = document.getElementById('result-text');
            const showAnswerBtn = document.getElementById('show-answer');
            const correctAnswerSection = document.getElementById('correct-answer');
            const retryBtn = document.getElementById('retry');
            
            // Initialize variables
            let initialBudget = 100000;
            let remainingBudget = initialBudget;
            let selectedCandidates = [];
            
            // Start game button click
            startGameBtn.addEventListener('click', function() {
                // Get participant names
                const bossName = document.getElementById('boss-name').value || "The HR Manager";
                const candidate1Name = document.getElementById('candidate1-name').value || "Candidate 1";
                const candidate2Name = document.getElementById('candidate2-name').value || "Candidate 2";
                const candidate3Name = document.getElementById('candidate3-name').value || "Candidate 3";
                const candidate4Name = document.getElementById('candidate4-name').value || "Candidate 4";
                
                // Update names in the case study
                document.querySelectorAll('#boss-name-display, #boss-name-display2, #boss-name-display3').forEach(element => {
                    element.textContent = bossName;
                });
                
                document.getElementById('candidate1-name-display').textContent = candidate1Name;
                document.getElementById('candidate2-name-display').textContent = candidate2Name;
                document.getElementById('candidate3-name-display').textContent = candidate3Name;
                document.getElementById('candidate4-name-display').textContent = candidate4Name;
                
                // Hide setup, show case study
                setupSection.style.display = 'none';
                caseStudySection.style.display = 'block';
                
                // Scroll to case study
                caseStudySection.scrollIntoView({ behavior: 'smooth' });
                
                // Add animation
                caseStudySection.classList.add('fade-in');
            });
            
            // Candidate selection
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateBudget();
                });
            });
            
            // Update budget calculation
            function updateBudget() {
                remainingBudget = initialBudget;
                selectedCandidates = [];
                
                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        const salary = parseInt(checkbox.getAttribute('data-salary'));
                        remainingBudget -= salary;
                        
                        // Store selected candidate info
                        const candidateElement = checkbox.closest('.candidate');
                        const name = candidateElement.querySelector('h4').textContent;
                        const position = candidateElement.querySelector('p:nth-of-type(1)').textContent.split(':')[1].trim();
                        
                        selectedCandidates.push({
                            name: name,
                            position: position,
                            salary: salary
                        });
                    }
                });
                
                // Update display
                remainingBudgetDisplay.textContent = `Remaining Budget: £${remainingBudget.toLocaleString()}`;
                
                // Show warning if over budget
                if (remainingBudget < 0) {
                    warningText.style.display = 'block';
                    submitDecisionBtn.classList.add('disabled');
                    submitDecisionBtn.disabled = true;
                } else {
                    warningText.style.display = 'none';
                    submitDecisionBtn.classList.remove('disabled');
                    submitDecisionBtn.disabled = false;
                }
            }
            
            // Submit decision
            submitDecisionBtn.addEventListener('click', function() {
                // Check if there are selections
                if (selectedCandidates.length === 0) {
                    alert('Please select at least one candidate!');
                    return;
                }
                
                // Check the selections against optimal solution
                let isCorrect = false;
                
                // Check if selected Production Engineer (candidate3) and Maintenance Technician (candidate2)
                const hasProductionEngineer = selectedCandidates.some(candidate => 
                    candidate.name.includes('Candidate 3') || candidate.position.includes('Production Engineer'));
                
                const hasMaintenanceTechnician = selectedCandidates.some(candidate => 
                    candidate.name.includes('Candidate 2') || candidate.position.includes('Maintenance Technician'));
                
                // Check if only these two positions are selected
                if (hasProductionEngineer && hasMaintenanceTechnician && selectedCandidates.length === 2) {
                    isCorrect = true;
                }
                
                // Display results
                resultsSection.style.display = 'block';
                
                if (isCorrect) {
                    resultHeading.textContent = 'Congratulations!';
                    resultText.innerHTML = `<p>You've made the optimal decision for JakAC's production department! The combination of a Production Engineer and Maintenance Technician provides the technical expertise needed to optimize production processes while ensuring equipment remains operational.</p>
                    <p>Your remaining budget: £${remainingBudget.toLocaleString()}</p>`;
                    resultsSection.className = 'results success';
                } else {
                    resultHeading.textContent = 'Not Quite Optimal';
                    resultText.innerHTML = `<p>Your selection is not the most optimal combination for JakAC's production needs. While you've selected ${selectedCandidates.length} candidate(s) with a remaining budget of £${remainingBudget.toLocaleString()}, there's a more effective combination available.</p>
                    <p>Click "Show Correct Answer" to see the optimal solution.</p>`;
                    resultsSection.className = 'results failure';
                }
                
                // Scroll to results
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            });
            
            // Show correct answer
            showAnswerBtn.addEventListener('click', function() {
                correctAnswerSection.style.display = 'block';
                correctAnswerSection.scrollIntoView({ behavior: 'smooth' });
            });
            
            // Retry button
            retryBtn.addEventListener('click', function() {
                // Reset selections
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                // Reset budget
                remainingBudget = initialBudget;
                updateBudget();
                
                // Hide results
                resultsSection.style.display = 'none';
                correctAnswerSection.style.display = 'none';
                
                // Scroll to candidates
                document.querySelector('.candidates').scrollIntoView({ behavior: 'smooth' });
            });
        }
    </script>
</body>
</html>